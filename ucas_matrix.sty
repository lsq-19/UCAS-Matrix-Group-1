%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%           *** UCAS Matrix 大作业 LaTeX 模板样式文件 ***
%
% 文件名: ucas_matrix.sty
% 描述:  中国科学院大学《矩阵分析与应用》课程大作业模板样式文件。
%        本模板简洁、规范，适用于课程报告或大作业提交。
%
% 作者:  Liu Hao
% 日期:  2025/10/12
% 版本:  v3.0
% GitHub: https://github.com/neverwinHao/UCAS-Matrix-Template
%
% 说明:  本模板在 UCASReport 模板基础上简化与定制。
% 源地址: https://www.overleaf.com/project/68eb4fe896594f27b468ab3d
%
% License:  Creative Commons CC BY 4.0
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ucas_matrix}[2025/10/12 v3.0 UCAS Matrix Template]

% --- 基础功能宏包 ---
\RequirePackage{amsmath, amsfonts, amssymb, graphicx}
\RequirePackage[export]{adjustbox}
\RequirePackage{caption, geometry, enumitem, url}

% --- 颜色与高级排版宏包 ---
\RequirePackage[dvipsnames, svgnames, x11names]{xcolor}
\RequirePackage{titlesec, titletoc}

% --- 核心模板功能宏包 ---
\RequirePackage{amsthm}
\RequirePackage[framemethod=default]{mdframed}
\RequirePackage[most]{tcolorbox}


% --- 字体与语言设置 (需要 XeLaTeX 编译) ---
\RequirePackage{xeCJK}
\setmainfont{Times New Roman}
\setCJKmainfont{FandolSong}
\setCJKsansfont{FandolHei}
\setCJKromanfont{FandolKai}
\newcommand{\heiti}{\sffamily}
\newcommand{\kaishu}{\rmfamily}

% --- 页面与文档布局配置 ---
% --- 页面与文档布局配置 ---
\geometry{a4paper, left=2.5cm, right=2.5cm, top=2.5cm, bottom=2.5cm}

% 正文字体大小（接近 UCASReport 标准）
\renewcommand\normalsize{\fontsize{12pt}{18pt}\selectfont}
\normalsize

% 段落间距与缩进
\setlength{\parindent}{2em}
\setlength{\parskip}{0.5em}

\titleformat{\section}
  {\normalfont\fontsize{16pt}{22pt}\bfseries\raggedright}
  {\thesection}{1em}{}

\titleformat{\subsection}
  {\normalfont\fontsize{14pt}{20pt}\bfseries\raggedright}
  {\thesubsection}{1em}{}

\titleformat{\subsubsection}
  {\normalfont\fontsize{12pt}{18pt}\bfseries\raggedright}
  {\thesubsubsection}{1em}{}

\titleformat{name=\section,numberless}
  {\normalfont\fontsize{16pt}{22pt}\bfseries\centering}{}{0em}{}




\graphicspath{ {./images/} }
\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\titleformat{\section}{\normalfont\Large\bfseries\raggedright}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries\raggedright}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\normalsize\bfseries\raggedright}{\thesubsubsection}{1em}{}
\titleformat{name=\section,numberless}{\normalfont\Large\bfseries\centering}{}{0em}{}


\RequirePackage[
    colorlinks=true,
    linkcolor=black,
    citecolor=black,
    urlcolor=blue
]{hyperref}

\renewcommand{\contentsname}{目录}


\newtheoremstyle{mytheoremstyle}
  {1em}{1em}{\normalfont}{}{\bfseries}{.}{.5em}{\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}
\theoremstyle{mytheoremstyle}
\newtheorem{example}{例}[subsection]
\newtheorem{exercise}{练习}[subsection]
\mdfdefinestyle{mybox}{
    backgroundcolor=black!5, innertopmargin=1.5em, innerbottommargin=1em,
    innerleftmargin=10pt, innerrightmargin=10pt, topline=true, bottomline=false,
    leftline=false, rightline=false, linewidth=2pt, linecolor=red,
    splittopskip=\topsep,
}
\surroundwithmdframed[style=mybox]{example}
\surroundwithmdframed[style=mybox]{exercise}
\newtcolorbox{bluebox}[2][]{
  colback=LightSkyBlue1, colframe=RoyalBlue4, fonttitle=\bfseries,
  coltext=black, boxrule=0.5pt, arc=4mm, title=#2, #1, breakable
}


% ============================================================
% 封面定义（参考 UCASReport 样式）
% ============================================================

% 封面命令：\ucascover
\newcommand{\ucascover}{
    % 封面页不显示页码
    \thispagestyle{empty}

    % 插入校徽（路径相对于 images 文件夹）
    \begin{center}
        \vspace*{2cm}
        \includegraphics[width=0.6\textwidth]{ucas_logo.pdf}
        \vspace{2cm}

        % 标题部分
        {\heiti\Huge 矩阵分析与应用大作业 \par}
        \vspace{1cm}
        {\heiti\Large \underline{矩阵与线性方程组} \par}
        \vspace{3cm}

        % 信息部分
        \vspace{1cm}
        \begin{center}
        \begin{tabular}{rl}
        {\kaishu\Large 小组：} & {\kaishu\Large \underline{\makebox[6cm]{XXX}}} \\[0.8cm]
        {\kaishu\Large 学号：} & {\kaishu\Large \underline{\makebox[6cm]{XXX}}} \\[0.8cm] \\
        % {\kaishu\Large ：} & {\kaishu\Large \underline{\makebox[6cm]{中国科学院自动化研究所}}} \\
        \end{tabular}
        \end{center}


        % 日期
        {\Large \today}
    \end{center}

    % 封面后新页
    \newpage
}


\endinput
